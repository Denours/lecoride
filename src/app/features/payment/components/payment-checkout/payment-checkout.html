<main class="p-6 max-w-2xl mx-auto">
  <h1 class="text-2xl font-bold mb-4">Paiement</h1>

  <!-- résumé -->
  <section class="mb-6 p-4 rounded border">
    <div class="font-semibold">Résumé du trajet</div>
    <div class="text-sm text-gray-600">{{ summary().pickup }} → {{ summary().dropoff }}</div>
    <div class="mt-2 text-lg font-bold">{{ amount() }} FCFA</div>
  </section>

  <!-- options -->
  <section class="grid gap-3 mb-6">
    <div role="listbox" aria-label="Modes de paiement" class="grid gap-3">
      <app-payment-option
        *ngFor="let opt of options"
        [option]="opt"
        [selected]="selected()?.id === opt.id"
        (select)="select($event)"
      ></app-payment-option>
    </div>
  </section>

  <div class="flex gap-3">
    <button
      type="button"
      class="flex-1 bg-blue-600 text-white py-3 rounded disabled:opacity-60"
      (click)="startPayment()"
      [disabled]="stage() === 'pending'"
    >
      Payer {{ amount() }} FCFA
    </button>

    <button
      type="button"
      class="px-4 py-3 border rounded bg-slate-400"
      (click)="downloadReceipt()"
      [disabled]="stage() !== 'success'"
    >
      Télécharger reçu
    </button>
  </div>

  <div *ngIf="message()" class="mt-4">
    <div
      class="p-3 rounded"
      [class.bg-green-100]="stage() === 'success'"
      [class.bg-yellow-100]="stage() === 'pending'"
      [class.bg-red-100]="stage() === 'failed'"
    >
      {{ message() }}
    </div>
  </div>
</main>
